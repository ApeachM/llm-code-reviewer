# Multi-pass review with self-critique for semantic issues
# Research hypothesis: -20% false positives through self-critique

experiment_id: multi_pass_self_critique
technique_name: multi_pass
model_name: deepseek-coder:33b-instruct
dataset_path: experiments/ground_truth/cpp

technique_params:
  # Pass 1: Initial detection
  pass1_prompt: |
    You are an expert C++ code reviewer. Analyze this code for SEMANTIC issues only.

    **IMPORTANT:** DO NOT report memory, concurrency, or performance issues (tools handle these).

    Categories: logic-errors, api-misuse, semantic-inconsistency, edge-case-handling, code-intent-mismatch

    Be thorough - look for any potential semantic issues, even if not 100% certain.
    Respond with JSON array: [{category, severity, line, description, reasoning}]

  # Pass 2: Self-critique
  pass2_prompt: |
    You previously identified these potential issues:
    {PASS1_ISSUES}

    Now review each issue critically:
    1. Is this actually a SEMANTIC issue (not memory/performance)?
    2. What's your confidence level (0.0-1.0)?
    3. Should this issue be kept, modified, or removed?

    Respond with revised JSON array, adding "confidence" field to each issue.
    Remove issues with confidence < 0.6 or non-semantic issues.

  confidence_threshold: 0.6
  temperature: 0.1
  max_tokens: 2000

seed: 42
